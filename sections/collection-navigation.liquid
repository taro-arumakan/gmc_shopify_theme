{%- liquid
  assign ajax_url = collection.url | append: '?'
  unless collection.current_vendor == blank and collection.current_type == blank
    assign ajax_url = collection.url | append: '&'
  endunless

  assign mobile_spacing_above = section.settings.mobile-spacing-above
  assign mobile_spacing_below = section.settings.mobile-spacing-below
  assign show_browse_button = section.settings.show-browse-button
  assign show_sort_button = section.settings.show-sort-button
  assign show_refine_button = section.settings.show-refine-button
  assign spacing_above = section.settings.spacing-above
  assign spacing_below = section.settings.spacing-below
-%}

{%-
  render 'navigation',
  ajax_url: ajax_url,
  custom_collection_list: section.settings.custom-list-collections,
  mobile_buttons: 'browse,refine',
  mobile_spacing_above: mobile_spacing_above,
  mobile_spacing_below: mobile_spacing_below,
  results_string: false,
  show_browse_button: show_browse_button,
  show_collection_list: section.settings.show-collections-list,
  show_layout_buttons: section.settings.show-layout-buttons,
  show_search_link: section.settings.show-search-link,
  show_sort_button: show_sort_button,
  show_sort_list: section.settings.show-sort-list,
  show_refine_button: show_refine_button,
  show_refine_list: section.settings.show-refine-list,
  spacing_above: spacing_above,
  spacing_below: spacing_below,
  storage_name: 'collection_layout',
  swatches: section.settings.swatches
-%}

{%- if show_browse_button or show_refine_button or show_sort_button -%}
  <element-relocator data-move-into=".drawer--container[data-view='filter']" data-mq="none">
    {%-
      render 'filter',
      collection_url: collection.url,
      custom_collection_list: section.settings.custom-list-collections,
      filters: collection.filters,
      show_collection_list: section.settings.show-collections-list,
      show_refine_list: section.settings.show-refine-list,
      show_search_link: section.settings.show-search-link,
      show_sort_list: section.settings.show-sort-list,
      sort_by: collection.sort_by,
      sort_options: collection.sort_options,
      swatches: section.settings.swatches
    -%}
  </element-relocator>
{%- endif -%}

{% schema %}
{
  "name": "Collection navigation",
  "class": "section--collection-navigation",
  "settings": [
    {
      "id": "spacing-above",
      "label": "Spacing above",
      "type": "select",
      "options": [
        {
          "label": "None",
          "value": "none"
        },
        {
          "label": "Small",
          "value": "small"
        },
        {
          "label": "Medium",
          "value": "medium"
        },
        {
          "label": "Large",
          "value": "large"
        },
        {
          "label": "Extra large",
          "value": "x-large"
        }
      ],
      "default": "none"
    },
    {
      "id": "spacing-below",
      "label": "Spacing below",
      "type": "select",
      "options": [
        {
          "label": "None",
          "value": "none"
        },
        {
          "label": "Small",
          "value": "small"
        },
        {
          "label": "Medium",
          "value": "medium"
        },
        {
          "label": "Large",
          "value": "large"
        },
        {
          "label": "Extra large",
          "value": "x-large"
        }
      ],
      "default": "none"
    },
    {
      "content": "Quick links",
      "type": "header"
    },
    {
      "label": "Show browse button",
      "id": "show-browse-button",
      "type": "checkbox",
      "default": true
    },
    {
      "label": "Show sort by button",
      "id": "show-sort-button",
      "type": "checkbox",
      "default": true
    },
    {
      "label": "Show refine button",
      "id": "show-refine-button",
      "type": "checkbox",
      "default": true
    },
    {
      "label": "Show layout buttons",
      "id": "show-layout-buttons",
      "type": "checkbox",
      "default": true
    },
    {
      "content": "Drawer",
      "type": "header"
    },
    {
      "label": "Show collections list",
      "id": "show-collections-list",
      "type": "checkbox",
      "default": true
    },
    {
      "label": "Enable custom collection list",
      "id": "custom-list-collections",
      "type": "link_list"
    },
    {
      "label": "Show sort by list",
      "id": "show-sort-list",
      "type": "checkbox",
      "default": true
    },
    {
      "label": "Show refine list",
      "id": "show-refine-list",
      "type": "checkbox",
      "default": true
    },
    {
      "type": "select",
      "id": "swatches",
      "label": "Swatches",
      "options": [
        { "label": "Circle", "value": "circle" },
        { "label": "Square", "value": "square" },
        { "label": "None", "value": "none" }
      ],
      "default": "circle",
      "info": "Connect options to swatch colors or images using Shopify metafields. [Learn more](https://help.shopify.com/en/manual/custom-data/metafields/category-metafields/using-category-metafields)"
    },
    {
      "label": "Show search link",
      "id": "show-search-link",
      "type": "checkbox",
      "default": true
    },
    {
      "type": "header",
      "content": "Mobile"
    },
    {
      "id": "mobile-spacing-above",
      "label": "Spacing above",
      "type": "select",
      "options": [
        {
          "label": "None",
          "value": "none"
        },
        {
          "label": "Small",
          "value": "small"
        },
        {
          "label": "Medium",
          "value": "medium"
        },
        {
          "label": "Large",
          "value": "large"
        },
        {
          "label": "Extra large",
          "value": "x-large"
        }
      ],
      "default": "none"
    },
    {
      "id": "mobile-spacing-below",
      "label": "Spacing below",
      "type": "select",
      "options": [
        {
          "label": "None",
          "value": "none"
        },
        {
          "label": "Small",
          "value": "small"
        },
        {
          "label": "Medium",
          "value": "medium"
        },
        {
          "label": "Large",
          "value": "large"
        },
        {
          "label": "Extra large",
          "value": "x-large"
        }
      ],
      "default": "none"
    }
  ]
}
{% endschema %}