{%- liquid
  assign aspect_ratio = 100.0 | divided_by: section.settings.aspect-ratio | round: 4
  assign bg_color = section.settings.background-color
  assign border = section.settings.border
  assign button_style = section.settings.button-style
  assign container_width = section.settings.container-width
  assign mobile_aspect_ratio = 100.0 | divided_by: section.settings.mobile-aspect-ratio | round: 4
  assign mobile_full_width = section.settings.mobile-full-width
  assign mobile_spacing_above = section.settings.mobile-spacing-above
  assign mobile_spacing_below = section.settings.mobile-spacing-below
  assign spacing_above = section.settings.spacing-above
  assign spacing_below = section.settings.spacing-below
  assign white_text = section.settings.white-text

  assign full_width = false
  if container_width == '6'
    assign full_width = true
  endif
-%}

<div
  class="featured-video--root"
  data-section-id="{{ section.id }}"
  data-background-color="{{ bg_color }}"
  data-border="{{ border }}"
  data-container-width="{{ container_width }}"
  data-header-overlap-compatible
  data-mobile-full-width="{{ mobile_full_width }}"
  data-mobile-spacing-above="{{ mobile_spacing_above }}"
  data-mobile-spacing-below="{{ mobile_spacing_below }}"
  {% if white_text %}
    data-text-color="white"
  {% endif %}
  data-spacing-above="{{ spacing_above }}"
  data-spacing-below="{{ spacing_below }}"
>
  {%-
    render 'video',
    aspect_ratio: aspect_ratio,
    autoplay: section.settings.autoplay,
    button_style: button_style,
    button_text: section.settings.button-text,
    button_url: section.settings.button-url,
    description: section.settings.description,
    display_type: section.settings.video-display-type,
    full_width: full_width,
    heading: section.settings.heading,
    heading_type: section.settings.heading-type,
    highlight_color: section.settings.highlight-color,
    highlight_text: section.settings.highlight-text,
    highlight_type: section.settings.highlight-type,
    id: section.id,
    white_text: white_text,
    mobile_aspect_ratio: mobile_aspect_ratio,
    mobile_display_type: section.settings.mobile-video-display-type,
    mobile_full_width: mobile_full_width,
    mobile_text_x_alignment: section.settings.mobile-text-horizontal-alignment,
    mobile_text_y_alignment: section.settings.mobile-text-vertical-alignment,
    mobile_thumbnail: section.settings.mobile-thumbnail,
    mobile_hide_description: section.settings.mobile-hide-description,
    overline: section.settings.overline,
    overlay_style: section.settings.overlay-style,
    play_button_style: section.settings.play-button-style,
    text_bg_color: section.settings.text-background-color,
    text_style: section.settings.text-style,
    text_width: section.settings.text-width,
    text_x_alignment: section.settings.text-horizontal-alignment,
    text_y_alignment: section.settings.text-vertical-alignment,
    thumbnail: section.settings.image,
    video_upload: section.settings.video-upload,
    video_url: section.settings.video-url
  -%}
</div>

{% schema %}
  {
    "name": "Video",
    "class": "section--featured-video",
    "settings": [
      {
        "type": "header",
        "content": "General layout"
      },
      {
        "id": "border",
        "label": "Border",
        "type": "select",
        "options": [
          {
            "label": "Top",
            "value": "top"
          },
          {
            "label": "Bottom",
            "value": "bottom"
          },
          {
            "label": "Both",
            "value": "both"
          },
          {
            "label": "None",
            "value": "none"
          }
        ],
        "default": "none"
      },
      {
        "id": "spacing-above",
        "label": "Spacing above",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Small",
            "value": "small"
          },
          {
            "label": "Medium",
            "value": "medium"
          },
          {
            "label": "Large",
            "value": "large"
          },
          {
            "label": "Extra large",
            "value": "x-large"
          }
        ],
        "default": "large"
      },
      {
        "id": "spacing-below",
        "label": "Spacing below",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Small",
            "value": "small"
          },
          {
            "label": "Medium",
            "value": "medium"
          },
          {
            "label": "Large",
            "value": "large"
          },
          {
            "label": "Extra large",
            "value": "x-large"
          }
        ],
        "default": "large"
      },
      {
        "id": "container-width",
        "label": "Maximum width of container",
        "type": "select",
        "options": [
          {
            "label": "Extra small",
            "value": "1"
          },
          {
            "label": "Small",
            "value": "2"
          },
          {
            "label": "Medium",
            "value": "3"
          },
          {
            "label": "Large",
            "value": "4"
          },
          {
            "label": "Extra large",
            "value": "5"
          },
          {
            "label": "Full width",
            "value": "6"
          }
        ],
        "default": "6"
      },
      {
        "id": "background-color",
        "label": "Background color",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Light",
            "value": "light"
          },
          {
            "label": "Dark",
            "value": "dark"
          },
          {
            "label": "Accent 1",
            "value": "accent-1"
          },
          {
            "label": "Accent 2",
            "value": "accent-2"
          },
          {
            "label": "Accent 3",
            "value": "accent-3"
          }
        ],
        "default": "none"
      },
      {
        "type": "header",
        "content": "Text layout"
      },
      {
        "id": "white-text",
        "label": "Use white text color",
        "type": "checkbox",
        "default": true
      },
      {
        "id": "text-width",
        "label": "Text width",
        "type": "range",
        "min": 300,
        "max": 800,
        "step": 25,
        "unit": "px",
        "default": 400
      },
      {
        "label": "Horizontal text position",
        "id": "text-horizontal-alignment",
        "type": "text_alignment",
        "default": "center"
      },
      {
        "label": "Vertical text position",
        "id": "text-vertical-alignment",
        "type": "select",
        "options": [
          { "label": "Bottom", "value": "bottom" },
          { "label": "Center", "value": "center" },
          { "label": "Top", "value": "top" }
        ],
        "default": "center"
      },
      {
        "id": "overlay-style",
        "label": "Image darkness",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Darken entire image",
            "value": "darken"
          },
          {
            "label": "Darken top down",
            "value": "darken-top"
          },
          {
            "label": "Darken bottom up",
            "value": "darken-bottom"
          }
        ],
        "default": "darken-bottom",
        "info": "Can enhance text visibility"
      },
      {
        "id": "text-style",
        "label": "Text shadows",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Text shadow",
            "value": "text-shadow"
          },
          {
            "label": "Oval shadow",
            "value": "eclipse-shadow"
          }
        ],
        "default": "none"
      },
      {
        "id": "text-background-color",
        "label": "Text background color",
        "type": "select",
        "options": [
          {
            "label": "Transparent",
            "value": "transparent"
          },
          {
            "label": "Light",
            "value": "light"
          },
          {
            "label": "Dark",
            "value": "dark"
          },
          {
            "label": "Accent 1",
            "value": "accent-1"
          },
          {
            "label": "Accent 2",
            "value": "accent-2"
          },
          {
            "label": "Accent 3",
            "value": "accent-3"
          }
        ],
        "default": "transparent"
      },
      {
        "id": "heading-type",
        "label": "Heading type",
        "type": "select",
        "options": [
          { "label": "Banner", "value": "banner-heading" },
          { "label": "Featured", "value": "featured-heading" },
          { "label": "Large", "value": "section-heading" },
          { "label": "Medium", "value": "block-heading" }
        ],
        "default": "featured-heading"
      },
      {
        "type": "header",
        "content": "Video options & layout"
      },
      {
        "id": "autoplay",
        "label": "Autoplay",
        "type": "checkbox",
        "default": true,
        "info": "Video are muted to allow autoplay."
      },
      {
        "id": "video-display-type",
        "label": "Video aspect ratio",
        "type": "select",
        "options": [
          { "label": "Original aspect ratio", "value": "original" },
          { "label": "Adjustable aspect ratio", "value": "aspect-ratio" },
          { "label": "Extra small", "value": "x-small" },
          { "label": "Small", "value": "small" },
          { "label": "Medium", "value": "medium" },
          { "label": "Large", "value": "large" },
          { "label": "Extra large", "value": "x-large" },
          { "label": "Fit screen", "value": "fit-screen" }
        ],
        "default": "aspect-ratio"
      },
      {
        "id": "aspect-ratio",
        "label": "Adjustable aspect ratio",
        "type": "range",
        "min": 24,
        "max": 200,
        "step": 2,
        "default": 56,
        "visible_if": "{{ section.settings.video-display-type == 'aspect-ratio' }}"
      },
      {
        "id": "play-button-style",
        "label": "Play button style",
        "type": "select",
        "options": [
          { "label": "Solid", "value": "solid" },
          { "label": "Outline", "value": "outline" }
        ],
        "default": "solid",
        "visible_if": "{{ section.settings.autoplay == false }}"
      },
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "video",
        "id": "video-upload",
        "label": "Video upload",
        "info": "To load videos as quickly as possible, upload a file instead of using external URLs."
      },
      {
        "type": "video_url",
        "id": "video-url",
        "label": "Video URL",
        "accept": ["youtube", "vimeo"]
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Thumbnail",
        "info": "1500 x 800px recommended"
      },
      {
        "id": "overline",
        "label": "Overline",
        "type": "text"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Video",
        "info": "Highlight headings by wrapping text with square brackets, ie. This is [highlighted]."
      },
      {
        "id": "highlight-type",
        "label": "Highlight type",
        "type": "select",
        "options": [
          {
            "label": "Italic",
            "value": "italic"
          },
          {
            "label": "Bold",
            "value": "bold"
          },
          {
            "label": "Bold italic",
            "value": "bold-italic"
          },
          {
            "label": "Text color",
            "value": "color"
          },
          {
            "label": "Outlined",
            "value": "outlined"
          },
          {
            "label": "Highlight",
            "value": "highlight"
          },
          {
            "label": "Half highlight",
            "value": "half-highlight"
          },
          {
            "label": "Underline",
            "value": "underline"
          },
          {
            "label": "Reverse opacity",
            "value": "reverse-opacity"
          }
        ],
        "default": "italic"
      },
      {
        "id": "highlight-color",
        "label": "Highlight color",
        "type": "select",
        "options": [
          {
            "label": "Transparent",
            "value": "transparent"
          },
          {
            "label": "Light",
            "value": "light"
          },
          {
            "label": "Dark",
            "value": "dark"
          },
          {
            "label": "Accent 1",
            "value": "accent-1"
          },
          {
            "label": "Accent 2",
            "value": "accent-2"
          },
          {
            "label": "Accent 3",
            "value": "accent-3"
          }
        ],
        "default": "accent-2"
      },
      {
        "id": "highlight-text",
        "label": "Highlighted text color",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Light",
            "value": "light"
          },
          {
            "label": "Dark",
            "value": "dark"
          },
          {
            "label": "Accent 1",
            "value": "accent-1"
          },
          {
            "label": "Accent 2",
            "value": "accent-2"
          },
          {
            "label": "Accent 3",
            "value": "accent-3"
          }
        ],
        "default": "none"
      },
      {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p>Add a description here</p>"
      },
      {
        "type": "url",
        "id": "button-url",
        "label": "Button URL"
      },
      {
        "id": "button-style",
        "label": "Button style",
        "type": "select",
        "options": [
          {
            "label": "Style 1",
            "value": "button-1"
          },
          {
            "label": "Style 2",
            "value": "button-2"
          },
          {
            "label": "Style 3",
            "value": "button-3"
          },
          {
            "label": "Style 4",
            "value": "button-4"
          },
          {
            "label": "Link",
            "value": "block-link"
          }
        ],
        "default": "button-2"
      },
      {
        "type": "text",
        "id": "button-text",
        "label": "Button text",
        "default": "button"
      },
      {
        "type": "header",
        "content": "Mobile"
      },
      {
        "id": "mobile-spacing-above",
        "label": "Spacing above",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Small",
            "value": "small"
          },
          {
            "label": "Medium",
            "value": "medium"
          },
          {
            "label": "Large",
            "value": "large"
          },
          {
            "label": "Extra large",
            "value": "x-large"
          }
        ],
        "default": "medium"
      },
      {
        "id": "mobile-spacing-below",
        "label": "Spacing below",
        "type": "select",
        "options": [
          {
            "label": "None",
            "value": "none"
          },
          {
            "label": "Small",
            "value": "small"
          },
          {
            "label": "Medium",
            "value": "medium"
          },
          {
            "label": "Large",
            "value": "large"
          },
          {
            "label": "Extra large",
            "value": "x-large"
          }
        ],
        "default": "medium"
      },
      {
        "id": "mobile-full-width",
        "label": "Full width",
        "type": "checkbox",
        "default": true
      },
      {
        "type": "image_picker",
        "id": "mobile-thumbnail",
        "label": "Mobile thumbnail (optional)"
      },
      {
        "id" :"mobile-video-display-type",
        "label": "Mobile video aspect ratio",
        "type": "select",
        "options": [
          { "label": "Original aspect ratio", "value": "original" },
          { "label": "Adjustable aspect ratio", "value": "aspect-ratio" },
          { "label": "Extra small", "value": "x-small" },
          { "label": "Small", "value": "small" },
          { "label": "Medium", "value": "medium" },
          { "label": "Large", "value": "large" },
          { "label": "Extra large", "value": "x-large" },
          { "label": "Fit screen", "value": "fit-screen" }
        ],
        "default": "original"
      },
      {
        "id": "mobile-aspect-ratio",
        "label": "Mobile adjustable aspect ratio",
        "type": "range",
        "min": 24,
        "max": 200,
        "step": 2,
        "default": 134,
        "visible_if": "{{ section.settings.mobile-video-display-type == 'aspect-ratio' }}"
      },
      {
        "label": "Horizontal text position",
        "id": "mobile-text-horizontal-alignment",
        "type": "text_alignment",
        "default": "center"
      },
      {
        "label": "Vertical text position",
        "id": "mobile-text-vertical-alignment",
        "type": "select",
        "options": [
          { "label": "Center", "value": "center" },
          { "label": "Bottom", "value": "bottom" }
        ],
        "default": "center"
      },
      {
        "id": "mobile-hide-description",
        "label": "Hide description in mobile",
        "type": "checkbox",
        "default": false
      }
    ],
    "presets": [
      {
        "name": "Video"
      }
    ],
    "disabled_on": {
      "groups": ["aside"]
    }
  }
{% endschema %}
